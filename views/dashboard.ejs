<div id="stats-page-container" class="m-auto text-center text-white">
  <section id="heading-container" class="m-auto mb-3 flex flex-wrap gap-2 text-center w-full">
    <h1 id="welcome-message" class="w-8/10 m-auto mt-10 mb-2 bg-cyan-800 text-gray-200 rounded-lg">
      Welcome, <%= user.username%>!
    </h1>
    <p class="mx-auto my-2 text-xs md:text-lg lg:text-lg w-30/100 h-fit bg-green-400 hover:bg-green-600 active:bg-green-950 text-white py-2 px-5 rounded-full mt-5"><a class="block" href="/">Main Search</a></p>
    <p class="mx-auto my-2 text-xs md:text-lg lg:text-lg w-30/100 h-fit bg-green-400 hover:bg-green-600 active:bg-green-950 text-white py-2 px-5 rounded-full mt-5"><a class="block" href="/practice/history">Session History</a></p>
  </section>
  <div id="user-info-container" class="w-95/100 m-auto md:w-9/10 h-full lg:w-9/10 border border-1 border-emerald-600 rounded-2xl">
    <dl class="grid grid-cols-1 xl:grid-cols-2 gap-3 p-2">
      <div>
        <dt class="w-9/10 text-left ml-4">Resources Accrued:</dt>
        <div class="w-9/10 m-auto h-40 md:h-80 overflow-y-scroll p-2 border border-2 border-sky-600 bg-stone-950 rounded-xl">
          <dd>
            <section id="user-stats-container" class="w-full min-h-24 m-auto">
              <ul>
                <% for (const resource of user.resources.slice(0).reverse()){ %>
                <li class="resource-li block opacity-100 transition-opacity duration-300 ease-out h-fit mb-2 relative">
                  <a href="<%= resource %>" target="_blank" class="block m-auto truncate w-9/10 px-4 py-2 text-xs md:text-lg text-left rtl:text-right border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:ring-gray-500 focus:text-white rounded-xl"><%= resource %>
                  </a>
                  <button type="button" id="<%= resource %>" class="delete-btn h-5/6 inline p-1 rounded-full border-1 border-black hover:border-white hover:pointer bg-red-700 hover:bg-red-900 active:bg-red-400 absolute right-1 top-1 z-10 hover:cursor-pointer">
                    <img class="max-h-full" src="/images/trash.svg" alt="Delete">
                  </button>
                </li>
                <% } %>
              </ul>
            </section>
          </dd>
        </div>
      </div>

      <div>
        <dt class="w-9/10 text-left ml-4">Previous Practice Sessions: <span id="session-count"><%= sessions.length %></span></dt>
        <div  class="w-9/10 m-auto h-40 md:h-80 overflow-y-scroll p-2 border border-2 border-sky-600 bg-stone-950 rounded-xl">
          <% for (const session of sessions.slice(0).reverse()){ %>
          <dd>
            <form action="/getSession" method="POST" class="relative session-form opacity-100 transition-opacity duration-300 ease-in-out">
              <input type="hidden" name="sessionId" value="<%= session._id %>">
              <button type="submit" class="block m-auto w-full">
                <section id="user-questions-container" class="w-9/10  m-auto">
                  <ul>
                    <li class="flex my-1 items-center text-center text-xs md:text-lg place-content-around px-4 py-2 text-left rtl:text-right border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:ring-gray-500 focus:text-white rounded-xl">
                      <div class="practice-date h-full w-5/10 text-center border-r-1 border-slate-900"><%= session.completedAt.toString().slice(4,15) %></div>
                      <div class="practice-length h-full w-5/10 text-center border-l-1 border-slate-900"><%= session.questions.length %> Questions</div>
                    </li>
                  </ul>
                </section>
              </button>
              <button type="button" id="<%= session._id.toString() %>" class="delete-session h-3/4 inline p-1 rounded-full border-1 border-black hover:border-white hover:pointer bg-red-700 hover:bg-red-900 active:bg-red-400 absolute -right-1 top-1 z-10 hover:cursor-pointer">
                <img class="max-h-full" src="/images/trash.svg" alt="Delete">
              </button>
            </form>
          </dd>
          <%}%>
        </div>
      </div>

      <div>
        <dt class="w-95/100 text-left ml-4">Questions</dt>
        <div class="w-9/10 m-auto h-40 md:h-80 overflow-y-scroll p-2 border border-2 border-sky-600 bg-stone-950 rounded-xl">
        <% for (const q of questions.reverse()){ %>
          <dd class="my-1">
            <section id="user-session-container" class="w-95/100 m-auto">
              <ul>
                <li>
                  <form action="/questions/byId" method="POST">
                    <input type="hidden" name="id" value="<%= q._id %>">
                    <button type="submit" class="w-full px-4 py-2 truncate text-sm md:text-lg lg:text-lg text-left rtl:text-right border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:ring-gray-500 focus:text-white rounded-xl"><%= q.content %>
                    </button>
                  </form>
                </li>
              </ul>
            </section>
          </dd>
          <%}%>
        </div>
      </div>
      
      <div>
        <dt class="w-9/10 text-left ml-4">Need Something Else?</dt>
        <dd>
          <section id="user-nav-container" class="w-9/10 h-fit m-auto">
            <ul class="grid grid-cols-2 text-xs md:text-lg gap-1 md:gap-3 p-2 min-h-24 md:h-80 border border-2 border-sky-600 bg-stone-950 rounded-xl">
              <li class="p-2 h-fit w-full m-auto">
                <a href="/questions/form" class="block m-auto text-center h-full p-2 font-medium border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:text-white rounded-xl">Add New Question
                </a>
              </li>
              <li class="p-2 h-fit w-full m-auto">
                <a href="/practice" class="block m-auto text-center h-full p-2 font-medium border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:text-white rounded-xl">New Practice
                </a>
              </li>
              <li class="p-2 h-fit w-full m-auto">
                <a href="/questions/edit/select" class="block m-auto text-center h-full p-2 font-medium border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:text-white rounded-xl">Edit Questions
                </a>
              </li>
              <li class="p-2 h-fit w-full m-auto">
                <form action="/questions/getSingleRandom" method="POST">
                  <button class="block w-full m-auto text-center h-full p-2 font-medium border-1 border-blue-200 cursor-pointer border-gray-600 bg-indigo-500 hover:bg-green-600 hover:text-white focus:text-white rounded-xl">Random Question
                  </button>
                </form>
              </li>
            </ul>
          </section>
        </dd>
      </div>
    </dl>
  </div>
</div>

<button id="settings-toggle" class="settings fixed top-2 right-3 z-50 p-2 text-sm text-gray-500 rounded-lg bg-gray-700 hover:bg-gray-400 focus:ring-2 focus:ring-blue-200 hover:cursor-pointer">
   <span class="sr-only">Settings</span>
   <img class="settings w-6 h-6" src="/images/settings.svg" alt="settings">
</button>

<section id="settings-menu" class="settings-menu settings hidden opacity-0 transition-opacity duration-300 ease-in-out h-fit w-2/5 md:w-1/6 fixed top-15 right-2 z-50 p-2 text-sm text-white bg-gray-600 border-1 border-white rounded-xl">
  <form id="user-settings" class="settings" action="/updateUser" method="PATCH">
    <h5 class="settings text-sm bg-teal-900 w-fit py-1 px-4 text-center rounded-full"><%= user.username %></h5>
    <p class="settings text-sm bg-blue-900 w-fit mt-2 py-1 px-4 text-center rounded-full">Career Level:</p>
    <ul>
      <li class="settings block my-2 ml-5 flex gap-3"><label class="settings" for="early"><input class="settings" id="early" name="status" type="radio" value="early" required>Early</label></li>
      <li class="settings block my-2 ml-5 flex gap-3"><label class="settings" for="early-mid"><input class="settings" id="early-mid" name="status" type="radio" value="early-to-mid">Early-Mid</label></li>
      <li class="settings block my-2 ml-5 flex gap-3"><label class="settings" for="mid"><input class="settings" id="mid" name="status" type="radio" value="mid">Mid-Level</label></li>
      <li class="settings block my-2 ml-5 flex gap-3"><label class="settings" for="mid-senior"><input class="settings" id="mid-senior" name="status" type="radio" value="mid-to-senior">Mid-Senior</label></li>
      <li class="settings block my-2 ml-5 flex gap-3"><label class="settings" for="senior"><input class="settings" id="senior" name="status" type="radio" value="senior">Senior Level</label></li>
    </ul>
    <p class="settings text-sm bg-blue-900 w-fit mt-2 py-1 px-4 text-center rounded-full">Position Title:</p>
    <div class="settings block my-2 ml-3 flex gap-3">
      <input id="title" name="title" type="text" placeholder="<%= user.info?.title %>" class="settings w-full mb-8 px-2 py-1 bg-gray-900 text-white border-1 border-blue-400 rounded-xl" minlength="3" maxlength="30" required>
    </div>
    <button type="submit" class="settings w-fit absolute bottom-2 right-2 px-3 py-1 bg-green-400 hover:bg-green-700 active:bg-green-900 rounded-2xl">Submit Changes</button>
  </form>
</section>

<script src="/dashboard.js"></script>